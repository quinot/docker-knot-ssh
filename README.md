# docker-knot-ssh

A Knot DNS Docker container with an SSH server for remote control and zone updates.

# Automated build

Automated builds of the image are available on:

- DockerHub: [quinot/knot-ssh](https://hub.docker.com/r/quinot/knot-ssh) ![Docker Image CI Status](https://github.com/quinot/docker-knot-ssh/workflows/Docker%20Image%20CI/badge.svg)

# Container parameters

## Env variables

`KNOTSSH_PUBLIC_KEY`: public key allowed to SSH into the container for SFTP/rsync/knotc.

## Directory structure

`config` is writable by user `knotssh` for update at run time. It contains the Knot configuration and zone files.

```
/config (persistent volume, writable by knotssh)
├── knot.conf
├── knot.conf.d (directory)
└── zones (directory)

/storage (persistent volume, NOT writable by knotssh)
└── knotssh
    ├── home
    │   └── .ssh
    │       └── authorized_keys (generated by entrypoint from env var)
    └── hostkeys
```

# TODO

* Transition to supervisord
